<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>상품 구매</title>
<link rel="stylesheet" href="/css/header-footer.css">
<link rel="stylesheet" th:href="@{/css/purchase-page.css}">
</head>
<body>
	<header>
		<div class="container">
			<div class="header-content">
				<a href="./"><h1 class="logo">Fugayo's Mart</h1></a>
				<nav>
					<ul>
						<li><a href="./">홈</a></li>
						<li><a href="/productpage/list">상품</a></li>
						<li><a href="/api/notice/list">공지사항</a></li>
						<li><a href="#">리뷰</a></li>
					</ul>
				</nav>
				<div class="user-actions">
					<span th:if="${session.loggedInMember != null}"> <a
						href="/member/mypage" th:text="${session.loggedInMember + '님'}"></a>
					</span> <span th:unless="${session.loggedInMember != null}">로그인 후
						이용하세요</span> <span th:if="${session.loggedInMember != null}"> <a
						href="/member/logout">로그아웃</a>
					</span> <span th:unless="${session.loggedInMember != null}"> <a
						href="/member/login">로그인</a>
					</span> <span>🛒</span> <span>QR</span>
				</div>
			</div>
		</div>
	</header>
<main>
  <div class="purchase-container">
    <div class="purchase-header">
      <div class="purchase-title">
        <h1>상품 구매</h1>
        <p>상품을 구매하고 집에서 맛있게 조리해보세요!</p>
      </div>
      <div class="product-image">
        <!-- <img th:src="" alt="상품 이미지" class="product-image"> -->
      </div>
    </div>

    <form th:action="@{/purchase/complete}" method="post" id="purchaseForm">
      <input type="hidden" name="pNo" th:value="${product.pNo}">
      <input type="hidden" name="pName" th:value="${product.pName}">
      <div class="product-details">
        <h2 th:text="${product.pName}">상품명</h2>
        <div class="product-info">
          <div class="product-image-small">
            <img th:src="${product.imageUrl}" th:alt="${product.pName + ' 이미지'}" class="product-thumbnail">
          </div>
          <div class="product-price-quantity">
            <p>
              상품금액: <span th:text="${#numbers.formatDecimal(product.pPrice, 0, 'COMMA', 0, 'POINT')}">0</span>원
            </p>
            <div class="quantity-selector">
              <label for="quantity">구매수량:</label>
              <input type="number" id="quantity" name="quantity" min="1" value="1">
            </div>
            <p>
              총 금액: <span id="totalAmount">0</span>원
            </p>
            <input type="hidden" name="totalAmount" id="totalAmountInput">
          </div>
        </div>
      </div>
      
      <div class="payment-section">
        <div class="payment-method">
          <h3>결제 수단</h3>
          <label>
            <input type="radio" name="paymentMethod" value="bankTransfer" checked>
            무통장입금
          </label>
        </div>
        <div class="purchase-button-container">
          <p class="final-amount">최종 결제 금액: <span id="finalAmount">0</span>원</p>
          <button type="submit" id="purchaseButton">결제하기</button>
        </div>
      </div>
    </form>
  </div>
</main>
	<footer>
		<hr>
		<div class="footerclass">회사소개 공지사항 문의하기 운영정책</div>
	</footer>
	<script th:src="@{/js/purchase-page.js}"></script>
</body>
</html>